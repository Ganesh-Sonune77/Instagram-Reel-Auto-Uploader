<h2>üìä Upload Status</h2>

<style>
   body {
    background: #102041;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  h2 {
    text-align: center;
    margin-top: 1rem;
    color: #6366f1;
  }
  #upload-info {
    max-width: 500px;
    margin: 2rem auto;
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    font-size: 1.1rem;
    animation: fadeIn 0.6s ease-in-out;
  }

  #progress-bar {
    transition: width 0.5s ease-in-out;
    background: #22c55e;
    height: 20px;
    border-radius: 6px;
  }
  .pr {
    text-align: center;
    margin-top: 1rem;
  }

  a{
    text-align: center;
    display: inline-block;
    margin-top: 10px;
    background: #6366f1;
    color: white;
    padding: 8px 14px;
    border-radius: 6px;
    text-decoration: none;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.3s;
  }
  

  button {
    text-align: center;
    display: inline-block;
    margin-top: 10px;
    background: #6366f1;
    color: white;
    padding: 8px 14px;
    border-radius: 6px;
    text-decoration: none;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.3s;
  }

  a:hover, button:hover {
    background: #4f46e5;
  }

  button:disabled {
    background: #9ca3af;
    cursor: not-allowed;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }
</style>

<div id="upload-info">
  Reel: <span id="upload-reel">N/A</span><br>
  Status: <span id="upload-status">Idle</span><br>
  Progress: <span id="upload-percent">0%</span>
  <div style="width: 100%; border: 1px solid #ccc; margin-top: 8px;">
    <div id="progress-bar" style="width: 0%;"></div>
  </div>
  <br>
  Next reel in: <span id="countdown">--:--</span>
</div>
<div class="pr">
<a href="/pause">‚è∏Ô∏è Pause</a>
<button id="resume-btn" onclick="location.href='/resume'">‚ñ∂Ô∏è Resume</button>
</div>
<script>
function fetchStatus() {
  fetch('/upload_status')
    .then(res => res.json())
    .then(data => {
      const upload = data.upload || {};
      document.getElementById("upload-reel").textContent = upload.reel || "N/A";
      document.getElementById("upload-status").textContent = upload.status || "Idle";
      document.getElementById("upload-percent").textContent = upload.percent + "%";
      document.getElementById("progress-bar").style.width = upload.percent + "%";
      document.getElementById("resume-btn").disabled = (upload.status === "uploading");

      if (data.next_upload) {
        let target = new Date(data.next_upload);
        let now = new Date();
        let diff = target - now;
        let mins = Math.floor(diff / 60000);
        let secs = Math.floor((diff % 60000) / 1000);
        document.getElementById("countdown").textContent = `${mins}m ${secs}s`;
      } else {
        document.getElementById("countdown").textContent = "--:--";
      }
    });
}
setInterval(fetchStatus, 1500);
</script>
